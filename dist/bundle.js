(()=>{"use strict";var t={274:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Investment=void 0,e.Investment=class{constructor(t,e,n,o,r,u,l,d,h){this.name=t,this.worth=e,this.worthText=n,this.ownedStocks=o,this.ownedStocksText=r,this.numberInput=u,this.buyInput=l,this.sellInput=d,this.total=h}Buy(t){return this.numberInput&&t>=this.worth*parseInt(this.numberInput.value)&&(t-=this.worth*parseInt(this.numberInput.value),this.ownedStocks+=parseInt(this.numberInput.value),this.numberInput.nodeValue),t}Sell(t){return this.numberInput&&this.ownedStocks>=parseInt(this.numberInput.value)&&(t+=this.worth*parseInt(this.numberInput.value),this.ownedStocks-=parseInt(this.numberInput.value)),t}}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var u=e[o]={exports:{}};return t[o](u,u.exports,n),u.exports}(()=>{const t=n(274);let e,o,r,u,l,d,h,s,m,a,i,c,I=1e3;const w=["Netto","Legoland","Humlegaarden","Curbfood 2","Minecraft","Elon Musk","Carls Tandlæge","Amazon","Vand Inc.","Blockbuster","Minecraft 2","Sprite","Pepsi","Bitcoin","Dunder Mifflin","PH lamper","Bogense Havn","Rasmus Aktie Spil","MySpace","r/HackerNews"];function g(t){I=t.Buy(I),S()}function y(t){I=t.Sell(I),S()}function p(t){I=t,o&&(o.style.display="none"),r&&(r.style.display="initial"),S(),v()}e=document.getElementById("pengeDisplay"),o=document.getElementById("startScreen"),r=document.getElementById("mainScreen"),u=document.getElementById("easyButton"),l=document.getElementById("mediumButton"),d=document.getElementById("hardButton"),a=new t.Investment("Trackunit",100,document.getElementById("lowWorth"),0,document.getElementById("lowOwned"),document.getElementById("lowNum"),document.getElementById("lowBuy"),document.getElementById("lowSell"),document.getElementById("lowTotal")),i=new t.Investment("Microsoft",500,document.getElementById("MedWorth"),0,document.getElementById("MedOwned"),document.getElementById("MedNum"),document.getElementById("MedBuy"),document.getElementById("MedSell"),document.getElementById("MedTotal")),c=new t.Investment("Curbfood",2e3,document.getElementById("HighWorth"),0,document.getElementById("HighOwned"),document.getElementById("HighNum"),document.getElementById("HighBuy"),document.getElementById("HighSell"),document.getElementById("HighTotal")),h=document.getElementById("lowTitle"),s=document.getElementById("medTitle"),m=document.getElementById("highTitle"),u&&(u.onclick=()=>p(100)),l&&(l.onclick=()=>p(1e3)),d&&(d.onclick=()=>p(1e4)),a.buyInput&&(a.buyInput.onclick=()=>g(a)),a.sellInput&&(a.sellInput.onclick=()=>y(a)),a.numberInput&&(a.numberInput.onchange=()=>S()),i.buyInput&&(i.buyInput.onclick=()=>g(i)),i.sellInput&&(i.sellInput.onclick=()=>y(i)),i.numberInput&&(i.numberInput.onchange=()=>S()),c.buyInput&&(c.buyInput.onclick=()=>g(c)),c.sellInput&&(c.sellInput.onclick=()=>y(c)),c.numberInput&&(c.numberInput.onchange=()=>S());let k,b=1.05,B=1.1,T=1.2,E=[],x=[],M=[];function v(){if(E.push(a.worth),f(E,"lowChart"),Math.random()>=.7&&(b=b>1?.94:1.06),a.worth*=b,a.worth=Math.round(a.worth),x.push(i.worth),f(x,"medChart"),Math.random()>=.65&&(B=B>1?.6:1.4),i.worth*=B,i.worth=Math.round(i.worth),M.push(c.worth),f(M,"highChart"),Math.random()>=.4&&(T=T>1?.2:2),c.worth*=T,c.worth=Math.round(c.worth),a.worth<=30){let t=document.getElementById("low");(null==t?void 0:t.style)&&(t.style.backgroundColor="rgb(240, 55, 55)"),setTimeout((()=>{E=[],a.ownedStocks=0,a.worth=100*Math.random(),a.worth=Math.round(a.worth),h&&(h.innerText=w[Math.floor(Math.random()*w.length)]),(null==t?void 0:t.style)&&(t.style.backgroundColor="rgb(54, 54, 54)")}),1e3)}if(i.worth<=50){let t=document.getElementById("med");(null==t?void 0:t.style)&&(t.style.backgroundColor="rgb(240, 55, 55)"),setTimeout((()=>{x=[],i.ownedStocks=0,i.worth=1e3*Math.random(),i.worth=Math.round(i.worth),s&&(s.innerText=w[Math.floor(Math.random()*w.length)]),(null==t?void 0:t.style)&&(t.style.backgroundColor="rgb(54, 54, 54)")}),1e3)}if(c.worth<=50){let t=document.getElementById("high");(null==t?void 0:t.style)&&(t.style.backgroundColor="rgb(240, 55, 55)"),setTimeout((()=>{M=[],c.ownedStocks=0,c.worth=5e3*Math.random(),c.worth=Math.round(c.worth),m&&(m.innerText=w[Math.floor(Math.random()*w.length)]),(null==t?void 0:t.style)&&(t.style.backgroundColor="rgb(54, 54, 54)")}),1e3)}S(),setTimeout((()=>{v()}),1e3)}function S(){e&&(e.innerText="Du har "+I+" dkk"),a.ownedStocksText&&a.worthText&&a.total&&(a.worthText.innerText="Værd "+a.worth+" per styk",a.ownedStocksText.innerText="Ejer "+a.ownedStocks+" aktier",a.total.innerText="("+a.worth*parseInt(a.numberInput.value)+" dkk)"),i.ownedStocksText&&i.worthText&&i.total&&(i.worthText.innerText="Værd "+i.worth+" per styk",i.ownedStocksText.innerText="Ejer "+i.ownedStocks+" aktier",i.total.innerText="("+i.worth*parseInt(i.numberInput.value)+" dkk)"),c.ownedStocksText&&c.worthText&&c.total&&(c.worthText.innerText="Værd "+c.worth+" per styk",c.ownedStocksText.innerText="Ejer "+c.ownedStocks+" aktier",c.total.innerText="("+c.worth*parseInt(c.numberInput.value)+" dkk)")}function f(t,e){let n=[];t.forEach(((e,o)=>{n.push(t[o]-Math.min(...t))})),console.log("y: "+n);let o=[];n.forEach(((t,e)=>{o.push(e+1)})),k=document.getElementById(e);const r=k.getContext("2d");if(!r)return;r.clearRect(0,0,180,100);let u=180/Math.max(...o);u+=u/o.length;const l=100/Math.max(...n);r.beginPath(),o.forEach(((t,e)=>{r.lineTo(o[e]*u-u,100-n[e]*l)})),r.stroke()}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90eXBlc2NyaXB0LW9uLWJyb3dzZXItc3RhcnRlci8uL3NyYy9JbnZlc3RtZW50LnRzIiwid2VicGFjazovL3R5cGVzY3JpcHQtb24tYnJvd3Nlci1zdGFydGVyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3R5cGVzY3JpcHQtb24tYnJvd3Nlci1zdGFydGVyLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwibmFtZSIsIndvcnRoIiwid29ydGhUZXh0Iiwib3duZWRTdG9ja3MiLCJvd25lZFN0b2Nrc1RleHQiLCJudW1iZXJJbnB1dCIsImJ1eUlucHV0Iiwic2VsbElucHV0IiwidG90YWwiLCJ0aGlzIiwiQnV5IiwibW9uZXkiLCJwYXJzZUludCIsInZhbHVlIiwibm9kZVZhbHVlIiwiU2VsbCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwicGVuZ2VEaXNwbGF5RWxlbWVudCIsInN0YXJ0U2NyZWVuRWxlbWVudCIsIm1haW5TY3JlZW5FbGVtZW50IiwiZWFzeUJ1dHRvbiIsIm1lZGl1bUJ1dHRvbiIsImhhcmRCdXR0b24iLCJsb3dUaXRsZSIsIm1lZFRpdGxlIiwiaGlnaFRpdGxlIiwiVHJhY2t1bml0IiwiTWljcm9zb2Z0IiwiQ3VyYmZvb2QiLCJuYW1lcyIsImludmVzdG1lbnQiLCJVcGRhdGUiLCJTdGFydCIsIm1vbmV5QW1vdW50Iiwic3R5bGUiLCJkaXNwbGF5IiwiR2FtZUxvb3AiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiSW52ZXN0bWVudCIsIm9uY2xpY2siLCJvbmNoYW5nZSIsIm15Q2hhcnQiLCJUcmFja3VuaXRDaGFuZ2UiLCJNaWNyb3NvZnRDaGFuZ2UiLCJDdXJiZm9vZENoYW5nZSIsIlRyYWNrdW5pdEFycmF5IiwiTWljcm9zb2Z0QXJyYXkiLCJDdXJiZm9vZEFycmF5IiwicHVzaCIsIkRyYXdHcmFwaCIsIk1hdGgiLCJyYW5kb20iLCJyb3VuZCIsImxvdyIsImJhY2tncm91bmRDb2xvciIsInNldFRpbWVvdXQiLCJpbm5lclRleHQiLCJmbG9vciIsImxlbmd0aCIsIm1lZCIsImhpZ2giLCJ5QXJyYXkiLCJjaGFydElkIiwibV95QXJyYXkiLCJmb3JFYWNoIiwiXyIsImkiLCJtaW4iLCJjb25zb2xlIiwibG9nIiwieEFycmF5IiwiY3R4IiwiZ2V0Q29udGV4dCIsImNsZWFyUmVjdCIsInhMaW5lTGVuZ3RoIiwibWF4IiwieUxpbmVMZW5ndGgiLCJiZWdpblBhdGgiLCJsaW5lVG8iLCJzdHJva2UiXSwibWFwcGluZ3MiOiIyR0FBQSxtQkFXSUEsWUFBWUMsRUFBY0MsRUFBZUMsRUFBK0JDLEVBQXFCQyxFQUFxQ0MsRUFBaUNDLEVBQThCQyxFQUErQkMsR0FDNU5DLEtBQUtULEtBQU9BLEVBQ1pTLEtBQUtSLE1BQVFBLEVBQ2JRLEtBQUtQLFVBQVlBLEVBQ2pCTyxLQUFLTixZQUFjQSxFQUNuQk0sS0FBS0wsZ0JBQWtCQSxFQUN2QkssS0FBS0osWUFBY0EsRUFDbkJJLEtBQUtILFNBQVdBLEVBQ2hCRyxLQUFLRixVQUFZQSxFQUNqQkUsS0FBS0QsTUFBUUEsRUFHakJFLElBQUlDLEdBTUEsT0FMR0YsS0FBS0osYUFBZU0sR0FBU0YsS0FBS1IsTUFBUVcsU0FBNEJILEtBQUtKLFlBQWFRLFNBQ3ZGRixHQUFTRixLQUFLUixNQUFRVyxTQUE0QkgsS0FBS0osWUFBYVEsT0FDcEVKLEtBQUtOLGFBQWVTLFNBQTRCSCxLQUFLSixZQUFhUSxPQUNsRUosS0FBS0osWUFBWVMsV0FFZEgsRUFHWEksS0FBS0osR0FLRCxPQUpHRixLQUFLSixhQUFlSSxLQUFLTixhQUFlUyxTQUE0QkgsS0FBS0osWUFBYVEsU0FDckZGLEdBQVNGLEtBQUtSLE1BQVFXLFNBQTRCSCxLQUFLSixZQUFhUSxPQUNwRUosS0FB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R2xCekIsRUFBVUwsU0FBU0MsZUFBZXlCLEdBQ2xDLE1BQU1TLEVBQTBCOUIsRUFBUytCLFdBQVcsTUFDcEQsSUFBS0QsRUFDSCxPQUdGQSxFQUFJRSxVQUFVLEVBQUcsRUFBRyxJQUFLLEtBRXpCLElBQUlDLEVBQWMsSUFBTXhCLEtBQUt5QixPQUFPTCxHQUNwQ0ksR0FBZUEsRUFBY0osRUFBT1osT0FDcEMsTUFBTWtCLEVBQWMsSUFBTTFCLEtBQUt5QixPQUFPWixHQUN0Q1EsRUFBSU0sWUFFSlAsRUFBT04sU0FBUSxDQUFDQyxFQUFHQyxLQUNqQkssRUFBSU8sT0FDRlIsRUFBT0osR0FBS1EsRUFBY0EsRUFDMUIsSUFBTVgsRUFBU0csR0FBS1UsTUFJeEJMLEVBQUlRLFciLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEludmVzdG1lbnR7XHJcbm5hbWU6IHN0cmluZ1xyXG53b3J0aDogbnVtYmVyXHJcbndvcnRoVGV4dDogSFRNTEVsZW1lbnQgfCBudWxsXHJcbm93bmVkU3RvY2tzOiBudW1iZXJcclxub3duZWRTdG9ja3NUZXh0OiBIVE1MRWxlbWVudCB8IG51bGxcclxubnVtYmVySW5wdXQ6IEhUTUxFbGVtZW50IHwgbnVsbFxyXG5idXlJbnB1dDogSFRNTEVsZW1lbnQgfCBudWxsXHJcbnNlbGxJbnB1dDogSFRNTEVsZW1lbnQgfCBudWxsXHJcbnRvdGFsOiBIVE1MRWxlbWVudCB8IG51bGxcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHdvcnRoOiBudW1iZXIsIHdvcnRoVGV4dDogSFRNTEVsZW1lbnQgfCBudWxsLCBvd25lZFN0b2NrczogbnVtYmVyLCBvd25lZFN0b2Nrc1RleHQ6IEhUTUxFbGVtZW50IHwgbnVsbCwgbnVtYmVySW5wdXQ6IEhUTUxFbGVtZW50IHwgbnVsbCwgYnV5SW5wdXQ6IEhUTUxFbGVtZW50IHwgbnVsbCwgc2VsbElucHV0OiBIVE1MRWxlbWVudCB8IG51bGwsIHRvdGFsOiBIVE1MRWxlbWVudCB8IG51bGwpe1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy53b3J0aCA9IHdvcnRoO1xyXG4gICAgICAgIHRoaXMud29ydGhUZXh0ID0gd29ydGhUZXh0O1xyXG4gICAgICAgIHRoaXMub3duZWRTdG9ja3MgPSBvd25lZFN0b2NrcztcclxuICAgICAgICB0aGlzLm93bmVkU3RvY2tzVGV4dCA9IG93bmVkU3RvY2tzVGV4dDtcclxuICAgICAgICB0aGlzLm51bWJlcklucHV0ID0gbnVtYmVySW5wdXQ7XHJcbiAgICAgICAgdGhpcy5idXlJbnB1dCA9IGJ1eUlucHV0O1xyXG4gICAgICAgIHRoaXMuc2VsbElucHV0ID0gc2VsbElucHV0O1xyXG4gICAgICAgIHRoaXMudG90YWwgPSB0b3RhbDtcclxuICAgIH1cclxuXHJcbiAgICBCdXkobW9uZXk6bnVtYmVyKSB7XHJcbiAgICAgICAgaWYodGhpcy5udW1iZXJJbnB1dCAmJiBtb25leSA+PSB0aGlzLndvcnRoICogcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PnRoaXMubnVtYmVySW5wdXQpLnZhbHVlKSl7XHJcbiAgICAgICAgICAgIG1vbmV5IC09IHRoaXMud29ydGggKiBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5udW1iZXJJbnB1dCkudmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLm93bmVkU3RvY2tzICs9IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD50aGlzLm51bWJlcklucHV0KS52YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMubnVtYmVySW5wdXQubm9kZVZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbW9uZXk7XHJcbiAgICB9XHJcblxyXG4gICAgU2VsbChtb25leTpudW1iZXIpe1xyXG4gICAgICAgIGlmKHRoaXMubnVtYmVySW5wdXQgJiYgdGhpcy5vd25lZFN0b2NrcyA+PSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5udW1iZXJJbnB1dCkudmFsdWUpKXtcclxuICAgICAgICAgICAgbW9uZXkgKz0gdGhpcy53b3J0aCAqIHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD50aGlzLm51bWJlcklucHV0KS52YWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMub3duZWRTdG9ja3MgLT0gcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50PnRoaXMubnVtYmVySW5wdXQpLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1vbmV5O1xyXG4gICAgfVxyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImltcG9ydCB7IEludmVzdG1lbnQgfSBmcm9tIFwiLi9JbnZlc3RtZW50XCI7XHJcblxyXG5sZXQgbW9uZXkgPSAxMDAwO1xyXG5sZXQgcGVuZ2VEaXNwbGF5RWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5sZXQgc3RhcnRTY3JlZW5FbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGw7XHJcbmxldCBtYWluU2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5cclxubGV0IGVhc3lCdXR0b246IEhUTUxFbGVtZW50IHwgbnVsbDtcclxubGV0IG1lZGl1bUJ1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5sZXQgaGFyZEJ1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5cclxubGV0IGxvd1RpdGxlOiBIVE1MRWxlbWVudCB8IG51bGw7XHJcbmxldCBtZWRUaXRsZTogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5sZXQgaGlnaFRpdGxlOiBIVE1MRWxlbWVudCB8IG51bGw7XHJcblxyXG5sZXQgVHJhY2t1bml0OiBJbnZlc3RtZW50O1xyXG5sZXQgTWljcm9zb2Z0OiBJbnZlc3RtZW50O1xyXG5sZXQgQ3VyYmZvb2Q6IEludmVzdG1lbnQ7XHJcblxyXG5jb25zdCBuYW1lcyA9IFtcclxuICBcIk5ldHRvXCIsXHJcbiAgXCJMZWdvbGFuZFwiLFxyXG4gIFwiSHVtbGVnYWFyZGVuXCIsXHJcbiAgXCJDdXJiZm9vZCAyXCIsXHJcbiAgXCJNaW5lY3JhZnRcIixcclxuICBcIkVsb24gTXVza1wiLFxyXG4gIFwiQ2FybHMgVGFuZGzDpmdlXCIsXHJcbiAgXCJBbWF6b25cIixcclxuICBcIlZhbmQgSW5jLlwiLFxyXG4gIFwiQmxvY2tidXN0ZXJcIixcclxuICBcIk1pbmVjcmFmdCAyXCIsXHJcbiAgXCJTcHJpdGVcIixcclxuICBcIlBlcHNpXCIsXHJcbiAgXCJCaXRjb2luXCIsXHJcbiAgXCJEdW5kZXIgTWlmZmxpblwiLFxyXG4gIFwiUEggbGFtcGVyXCIsXHJcbiAgXCJCb2dlbnNlIEhhdm5cIixcclxuICBcIlJhc211cyBBa3RpZSBTcGlsXCIsXHJcbiAgXCJNeVNwYWNlXCIsXHJcbiAgXCJyL0hhY2tlck5ld3NcIlxyXG5dO1xyXG5cclxucGVuZ2VEaXNwbGF5RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVuZ2VEaXNwbGF5XCIpO1xyXG5zdGFydFNjcmVlbkVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJ0U2NyZWVuXCIpO1xyXG5tYWluU2NyZWVuRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpblNjcmVlblwiKTtcclxuXHJcbmVhc3lCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVhc3lCdXR0b25cIik7XHJcbm1lZGl1bUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVkaXVtQnV0dG9uXCIpO1xyXG5oYXJkQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoYXJkQnV0dG9uXCIpO1xyXG5cclxuVHJhY2t1bml0ID0gbmV3IEludmVzdG1lbnQoXHJcbiAgXCJUcmFja3VuaXRcIixcclxuICAxMDAsXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb3dXb3J0aFwiKSxcclxuICAwLFxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG93T3duZWRcIiksXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb3dOdW1cIiksXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb3dCdXlcIiksXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb3dTZWxsXCIpLFxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG93VG90YWxcIilcclxuKTtcclxuTWljcm9zb2Z0ID0gbmV3IEludmVzdG1lbnQoXHJcbiAgXCJNaWNyb3NvZnRcIixcclxuICA1MDAsXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJNZWRXb3J0aFwiKSxcclxuICAwLFxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiTWVkT3duZWRcIiksXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJNZWROdW1cIiksXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJNZWRCdXlcIiksXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJNZWRTZWxsXCIpLFxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiTWVkVG90YWxcIilcclxuKTtcclxuQ3VyYmZvb2QgPSBuZXcgSW52ZXN0bWVudChcclxuICBcIkN1cmJmb29kXCIsXHJcbiAgMjAwMCxcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkhpZ2hXb3J0aFwiKSxcclxuICAwLFxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiSGlnaE93bmVkXCIpLFxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiSGlnaE51bVwiKSxcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkhpZ2hCdXlcIiksXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJIaWdoU2VsbFwiKSxcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIkhpZ2hUb3RhbFwiKVxyXG4pO1xyXG5cclxubG93VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvd1RpdGxlXCIpO1xyXG5tZWRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVkVGl0bGVcIik7XHJcbmhpZ2hUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGlnaFRpdGxlXCIpO1xyXG5cclxuaWYgKGVhc3lCdXR0b24pIHtcclxuICBlYXN5QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBTdGFydCgxMDApO1xyXG59XHJcbmlmIChtZWRpdW1CdXR0b24pIHtcclxuICBtZWRpdW1CdXR0b24ub25jbGljayA9ICgpID0+IFN0YXJ0KDEwMDApO1xyXG59XHJcbmlmIChoYXJkQnV0dG9uKSB7XHJcbiAgaGFyZEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gU3RhcnQoMTAwMDApO1xyXG59XHJcblxyXG5pZiAoVHJhY2t1bml0LmJ1eUlucHV0KSB7XHJcbiAgVHJhY2t1bml0LmJ1eUlucHV0Lm9uY2xpY2sgPSAoKSA9PiBCdXkoVHJhY2t1bml0KTtcclxufVxyXG5pZiAoVHJhY2t1bml0LnNlbGxJbnB1dCkge1xyXG4gIFRyYWNrdW5pdC5zZWxsSW5wdXQub25jbGljayA9ICgpID0+IFNlbGwoVHJhY2t1bml0KTtcclxufVxyXG5pZiAoVHJhY2t1bml0Lm51bWJlcklucHV0KSB7XHJcbiAgVHJhY2t1bml0Lm51bWJlcklucHV0Lm9uY2hhbmdlID0gKCkgPT4gVXBkYXRlKCk7XHJcbn1cclxuXHJcbmlmIChNaWNyb3NvZnQuYnV5SW5wdXQpIHtcclxuICBNaWNyb3NvZnQuYnV5SW5wdXQub25jbGljayA9ICgpID0+IEJ1eShNaWNyb3NvZnQpO1xyXG59XHJcbmlmIChNaWNyb3NvZnQuc2VsbElucHV0KSB7XHJcbiAgTWljcm9zb2Z0LnNlbGxJbnB1dC5vbmNsaWNrID0gKCkgPT4gU2VsbChNaWNyb3NvZnQpO1xyXG59XHJcbmlmIChNaWNyb3NvZnQubnVtYmVySW5wdXQpIHtcclxuICBNaWNyb3NvZnQubnVtYmVySW5wdXQub25jaGFuZ2UgPSAoKSA9PiBVcGRhdGUoKTtcclxufVxyXG5cclxuaWYgKEN1cmJmb29kLmJ1eUlucHV0KSB7XHJcbiAgQ3VyYmZvb2QuYnV5SW5wdXQub25jbGljayA9ICgpID0+IEJ1eShDdXJiZm9vZCk7XHJcbn1cclxuaWYgKEN1cmJmb29kLnNlbGxJbnB1dCkge1xyXG4gIEN1cmJmb29kLnNlbGxJbnB1dC5vbmNsaWNrID0gKCkgPT4gU2VsbChDdXJiZm9vZCk7XHJcbn1cclxuaWYgKEN1cmJmb29kLm51bWJlcklucHV0KSB7XHJcbiAgQ3VyYmZvb2QubnVtYmVySW5wdXQub25jaGFuZ2UgPSAoKSA9PiBVcGRhdGUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQnV5KGludmVzdG1lbnQ6IEludmVzdG1lbnQpIHtcclxuICBtb25leSA9IGludmVzdG1lbnQuQnV5KG1vbmV5KTtcclxuICBVcGRhdGUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gU2VsbChpbnZlc3RtZW50OiBJbnZlc3RtZW50KSB7XHJcbiAgbW9uZXkgPSBpbnZlc3RtZW50LlNlbGwobW9uZXkpO1xyXG4gIFVwZGF0ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBTdGFydChtb25leUFtb3VudDogbnVtYmVyKSB7XHJcbiAgbW9uZXkgPSBtb25leUFtb3VudDtcclxuXHJcbiAgaWYgKHN0YXJ0U2NyZWVuRWxlbWVudCkge1xyXG4gICAgc3RhcnRTY3JlZW5FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICB9XHJcbiAgaWYgKG1haW5TY3JlZW5FbGVtZW50KSB7XHJcbiAgICBtYWluU2NyZWVuRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJpbml0aWFsXCI7XHJcbiAgfVxyXG5cclxuICBVcGRhdGUoKTtcclxuICBHYW1lTG9vcCgpO1xyXG59XHJcblxyXG5sZXQgVHJhY2t1bml0Q2hhbmdlID0gMS4wNTtcclxubGV0IE1pY3Jvc29mdENoYW5nZSA9IDEuMTtcclxubGV0IEN1cmJmb29kQ2hhbmdlID0gMS4yO1xyXG5cclxubGV0IFRyYWNrdW5pdEFycmF5OiBudW1iZXJbXSA9IFtdO1xyXG5sZXQgTWljcm9zb2Z0QXJyYXk6IG51bWJlcltdID0gW107XHJcbmxldCBDdXJiZm9vZEFycmF5OiBudW1iZXJbXSA9IFtdO1xyXG5cclxuZnVuY3Rpb24gR2FtZUxvb3AoKSB7XHJcbiAgVHJhY2t1bml0QXJyYXkucHVzaChUcmFja3VuaXQud29ydGgpO1xyXG4gIERyYXdHcmFwaChUcmFja3VuaXRBcnJheSwgXCJsb3dDaGFydFwiKTtcclxuICBpZiAoTWF0aC5yYW5kb20oKSA+PSAwLjcpIHtcclxuICAgIGlmIChUcmFja3VuaXRDaGFuZ2UgPiAxKSB7XHJcbiAgICAgIFRyYWNrdW5pdENoYW5nZSA9IDAuOTQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBUcmFja3VuaXRDaGFuZ2UgPSAxLjA2O1xyXG4gICAgfVxyXG4gIH1cclxuICBUcmFja3VuaXQud29ydGggKj0gVHJhY2t1bml0Q2hhbmdlO1xyXG4gIFRyYWNrdW5pdC53b3J0aCA9IE1hdGgucm91bmQoVHJhY2t1bml0LndvcnRoKTtcclxuXHJcbiAgTWljcm9zb2Z0QXJyYXkucHVzaChNaWNyb3NvZnQud29ydGgpO1xyXG4gIERyYXdHcmFwaChNaWNyb3NvZnRBcnJheSwgXCJtZWRDaGFydFwiKTtcclxuICBpZiAoTWF0aC5yYW5kb20oKSA+PSAwLjY1KSB7XHJcbiAgICBpZiAoTWljcm9zb2Z0Q2hhbmdlID4gMSkge1xyXG4gICAgICBNaWNyb3NvZnRDaGFuZ2UgPSAwLjY7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBNaWNyb3NvZnRDaGFuZ2UgPSAxLjQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIE1pY3Jvc29mdC53b3J0aCAqPSBNaWNyb3NvZnRDaGFuZ2U7XHJcbiAgTWljcm9zb2Z0LndvcnRoID0gTWF0aC5yb3VuZChNaWNyb3NvZnQud29ydGgpO1xyXG5cclxuICBDdXJiZm9vZEFycmF5LnB1c2goQ3VyYmZvb2Qud29ydGgpO1xyXG4gIERyYXdHcmFwaChDdXJiZm9vZEFycmF5LCBcImhpZ2hDaGFydFwiKTtcclxuICBpZiAoTWF0aC5yYW5kb20oKSA+PSAwLjQpIHtcclxuICAgIGlmIChDdXJiZm9vZENoYW5nZSA+IDEpIHtcclxuICAgICAgQ3VyYmZvb2RDaGFuZ2UgPSAwLjI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBDdXJiZm9vZENoYW5nZSA9IDI7XHJcbiAgICB9XHJcbiAgfVxyXG4gIEN1cmJmb29kLndvcnRoICo9IEN1cmJmb29kQ2hhbmdlO1xyXG4gIEN1cmJmb29kLndvcnRoID0gTWF0aC5yb3VuZChDdXJiZm9vZC53b3J0aCk7XHJcblxyXG4gIGlmIChUcmFja3VuaXQud29ydGggPD0gMzApIHtcclxuICAgIGxldCBsb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvd1wiKTtcclxuICAgIGlmIChsb3c/LnN0eWxlKSB7XHJcbiAgICAgIGxvdy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJnYigyNDAsIDU1LCA1NSlcIjtcclxuICAgIH1cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBUcmFja3VuaXRBcnJheSA9IFtdO1xyXG4gICAgICBUcmFja3VuaXQub3duZWRTdG9ja3MgPSAwO1xyXG4gICAgICBUcmFja3VuaXQud29ydGggPSAxMDAgKiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICBUcmFja3VuaXQud29ydGggPSBNYXRoLnJvdW5kKFRyYWNrdW5pdC53b3J0aCk7XHJcbiAgICAgIGlmIChsb3dUaXRsZSkge1xyXG4gICAgICAgIGxvd1RpdGxlLmlubmVyVGV4dCA9IG5hbWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG5hbWVzLmxlbmd0aCldO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChsb3c/LnN0eWxlKSB7XHJcbiAgICAgICAgbG93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiKDU0LCA1NCwgNTQpXCI7XHJcbiAgICAgIH1cclxuICAgIH0sIDEwMDApO1xyXG4gIH1cclxuXHJcbiAgaWYgKE1pY3Jvc29mdC53b3J0aCA8PSA1MCkge1xyXG4gICAgbGV0IG1lZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVkXCIpO1xyXG4gICAgaWYgKG1lZD8uc3R5bGUpIHtcclxuICAgICAgbWVkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiKDI0MCwgNTUsIDU1KVwiO1xyXG4gICAgfVxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIE1pY3Jvc29mdEFycmF5ID0gW107XHJcbiAgICAgIE1pY3Jvc29mdC5vd25lZFN0b2NrcyA9IDA7XHJcbiAgICAgIE1pY3Jvc29mdC53b3J0aCA9IDEwMDAgKiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICBNaWNyb3NvZnQud29ydGggPSBNYXRoLnJvdW5kKE1pY3Jvc29mdC53b3J0aCk7XHJcbiAgICAgIGlmIChtZWRUaXRsZSkge1xyXG4gICAgICAgIG1lZFRpdGxlLmlubmVyVGV4dCA9IG5hbWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG5hbWVzLmxlbmd0aCldO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChtZWQ/LnN0eWxlKSB7XHJcbiAgICAgICAgbWVkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiKDU0LCA1NCwgNTQpXCI7XHJcbiAgICAgIH1cclxuICAgIH0sIDEwMDApO1xyXG4gIH1cclxuXHJcbiAgaWYgKEN1cmJmb29kLndvcnRoIDw9IDUwKSB7XHJcbiAgICBsZXQgaGlnaCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGlnaFwiKTtcclxuICAgIGlmIChoaWdoPy5zdHlsZSkge1xyXG4gICAgICBoaWdoLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiKDI0MCwgNTUsIDU1KVwiO1xyXG4gICAgfVxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIEN1cmJmb29kQXJyYXkgPSBbXTtcclxuICAgICAgQ3VyYmZvb2Qub3duZWRTdG9ja3MgPSAwO1xyXG4gICAgICBDdXJiZm9vZC53b3J0aCA9IDUwMDAgKiBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICBDdXJiZm9vZC53b3J0aCA9IE1hdGgucm91bmQoQ3VyYmZvb2Qud29ydGgpO1xyXG4gICAgICBpZiAoaGlnaFRpdGxlKSB7XHJcbiAgICAgICAgaGlnaFRpdGxlLmlubmVyVGV4dCA9IG5hbWVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG5hbWVzLmxlbmd0aCldO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChoaWdoPy5zdHlsZSkge1xyXG4gICAgICAgIGhpZ2guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZ2IoNTQsIDU0LCA1NClcIjtcclxuICAgICAgfVxyXG4gICAgfSwgMTAwMCk7XHJcbiAgfVxyXG5cclxuICBVcGRhdGUoKTtcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIEdhbWVMb29wKCk7XHJcbiAgfSwgMTAwMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFVwZGF0ZSgpIHtcclxuICBpZiAocGVuZ2VEaXNwbGF5RWxlbWVudCkge1xyXG4gICAgcGVuZ2VEaXNwbGF5RWxlbWVudC5pbm5lclRleHQgPSBcIkR1IGhhciBcIiArIG1vbmV5ICsgXCIgZGtrXCI7XHJcbiAgfVxyXG5cclxuICBpZiAoVHJhY2t1bml0Lm93bmVkU3RvY2tzVGV4dCAmJiBUcmFja3VuaXQud29ydGhUZXh0ICYmIFRyYWNrdW5pdC50b3RhbCkge1xyXG4gICAgVHJhY2t1bml0LndvcnRoVGV4dC5pbm5lclRleHQgPSBcIlbDpnJkIFwiICsgVHJhY2t1bml0LndvcnRoICsgXCIgcGVyIHN0eWtcIjtcclxuICAgIFRyYWNrdW5pdC5vd25lZFN0b2Nrc1RleHQuaW5uZXJUZXh0ID1cclxuICAgICAgXCJFamVyIFwiICsgVHJhY2t1bml0Lm93bmVkU3RvY2tzICsgXCIgYWt0aWVyXCI7XHJcbiAgICBUcmFja3VuaXQudG90YWwuaW5uZXJUZXh0ID1cclxuICAgICAgXCIoXCIgK1xyXG4gICAgICBUcmFja3VuaXQud29ydGggKlxyXG4gICAgICAgIHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD5UcmFja3VuaXQubnVtYmVySW5wdXQpLnZhbHVlKSArXHJcbiAgICAgIFwiIGRraylcIjtcclxuICB9XHJcblxyXG4gIGlmIChNaWNyb3NvZnQub3duZWRTdG9ja3NUZXh0ICYmIE1pY3Jvc29mdC53b3J0aFRleHQgJiYgTWljcm9zb2Z0LnRvdGFsKSB7XHJcbiAgICBNaWNyb3NvZnQud29ydGhUZXh0LmlubmVyVGV4dCA9IFwiVsOmcmQgXCIgKyBNaWNyb3NvZnQud29ydGggKyBcIiBwZXIgc3R5a1wiO1xyXG4gICAgTWljcm9zb2Z0Lm93bmVkU3RvY2tzVGV4dC5pbm5lclRleHQgPVxyXG4gICAgICBcIkVqZXIgXCIgKyBNaWNyb3NvZnQub3duZWRTdG9ja3MgKyBcIiBha3RpZXJcIjtcclxuICAgIE1pY3Jvc29mdC50b3RhbC5pbm5lclRleHQgPVxyXG4gICAgICBcIihcIiArXHJcbiAgICAgIE1pY3Jvc29mdC53b3J0aCAqXHJcbiAgICAgICAgcGFyc2VJbnQoKDxIVE1MSW5wdXRFbGVtZW50Pk1pY3Jvc29mdC5udW1iZXJJbnB1dCkudmFsdWUpICtcclxuICAgICAgXCIgZGtrKVwiO1xyXG4gIH1cclxuXHJcbiAgaWYgKEN1cmJmb29kLm93bmVkU3RvY2tzVGV4dCAmJiBDdXJiZm9vZC53b3J0aFRleHQgJiYgQ3VyYmZvb2QudG90YWwpIHtcclxuICAgIEN1cmJmb29kLndvcnRoVGV4dC5pbm5lclRleHQgPSBcIlbDpnJkIFwiICsgQ3VyYmZvb2Qud29ydGggKyBcIiBwZXIgc3R5a1wiO1xyXG4gICAgQ3VyYmZvb2Qub3duZWRTdG9ja3NUZXh0LmlubmVyVGV4dCA9XHJcbiAgICAgIFwiRWplciBcIiArIEN1cmJmb29kLm93bmVkU3RvY2tzICsgXCIgYWt0aWVyXCI7XHJcbiAgICBDdXJiZm9vZC50b3RhbC5pbm5lclRleHQgPVxyXG4gICAgICBcIihcIiArXHJcbiAgICAgIEN1cmJmb29kLndvcnRoICpcclxuICAgICAgICBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+Q3VyYmZvb2QubnVtYmVySW5wdXQpLnZhbHVlKSArXHJcbiAgICAgIFwiIGRraylcIjtcclxuICB9XHJcbn1cclxuXHJcbmxldCBteUNoYXJ0OiBIVE1MRWxlbWVudCB8IG51bGw7XHJcblxyXG5mdW5jdGlvbiBEcmF3R3JhcGgoeUFycmF5OiBudW1iZXJbXSwgY2hhcnRJZDogc3RyaW5nKSB7XHJcbiAgbGV0IG1feUFycmF5OiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICB5QXJyYXkuZm9yRWFjaCgoXywgaSkgPT4ge1xyXG4gICAgbV95QXJyYXkucHVzaCh5QXJyYXlbaV0gLSBNYXRoLm1pbiguLi55QXJyYXkpKTtcclxuICB9KTtcclxuXHJcbiAgY29uc29sZS5sb2coXCJ5OiBcIiArIG1feUFycmF5KTtcclxuXHJcbiAgbGV0IHhBcnJheTogbnVtYmVyW10gPSBbXTtcclxuXHJcbiAgbV95QXJyYXkuZm9yRWFjaCgoXywgaSkgPT4ge1xyXG4gICAgeEFycmF5LnB1c2goaSArIDEpO1xyXG4gIH0pO1xyXG5cclxuICBteUNoYXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2hhcnRJZCk7XHJcbiAgY29uc3QgY3R4ID0gKDxIVE1MQ2FudmFzRWxlbWVudD5teUNoYXJ0KS5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgaWYgKCFjdHgpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGN0eC5jbGVhclJlY3QoMCwgMCwgMTgwLCAxMDApO1xyXG5cclxuICBsZXQgeExpbmVMZW5ndGggPSAxODAgLyBNYXRoLm1heCguLi54QXJyYXkpO1xyXG4gIHhMaW5lTGVuZ3RoICs9IHhMaW5lTGVuZ3RoIC8geEFycmF5Lmxlbmd0aDtcclxuICBjb25zdCB5TGluZUxlbmd0aCA9IDEwMCAvIE1hdGgubWF4KC4uLm1feUFycmF5KTtcclxuICBjdHguYmVnaW5QYXRoKCk7XHJcblxyXG4gIHhBcnJheS5mb3JFYWNoKChfLCBpKSA9PiB7XHJcbiAgICBjdHgubGluZVRvKFxyXG4gICAgICB4QXJyYXlbaV0gKiB4TGluZUxlbmd0aCAtIHhMaW5lTGVuZ3RoLFxyXG4gICAgICAxMDAgLSBtX3lBcnJheVtpXSAqIHlMaW5lTGVuZ3RoXHJcbiAgICApO1xyXG4gIH0pO1xyXG5cclxuICBjdHguc3Ryb2tlKCk7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==